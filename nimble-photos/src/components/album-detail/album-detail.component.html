<div class="scroll-container px-6 py-10">
    @if (loading()) {
    <div class="flex justify-center py-40">
        <span class="animate-pulse text-indigo-400 font-medium">Opening album...</span>
    </div>
    } @else if (album(); as a) {
    <section class="space-y-4">
        <div class="flex items-center gap-6 text-sm text-slate-400">
            <span class="uppercase tracking-[0.4em] text-xs text-indigo-400">{{ a.kind }}</span>
            <span>Created: {{ a.createDate ? (a.createDate | date:'longDate') : 'n/a' }}</span>
            <span>Images: {{ a.imageCount ?? 'n/a' }}</span>
        </div>
        <h1 class="text-4xl font-bold text-white">{{ a.name }}</h1>
        <p class="text-lg text-slate-200 leading-relaxed">
            {{ a.description || 'This album has no description yet.' }}
        </p>
    </section>

    <section class="mt-10">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-2xl font-bold text-white">Photos</h2>
            <span class="text-sm text-slate-400">
                Showing {{ a.photos?.items?.length ?? 0 }} photos
            </span>
        </div>

        @if (a.photos?.items?.length) {
        <div class="masonry-grid">
            @for (photo of a.photos?.items ?? []; track photo.id) {
            <article [routerLink]="['/album', a.id, 'photo', photo.id]" class="photo-card cursor-pointer"
                [style.backgroundImage]="'linear-gradient(180deg, rgba(2,6,23,0) 0%, rgba(2,6,23,0.2) 50%, rgba(2,6,23,0.9) 100%), url(' + getImageUrl(photo) + ')'"
                [style.aspectRatio]="getAspectRatio(photo)">
                <div class="photo-content">
                    <div class="mt-auto">
                        <p class="photo-title text-lg leading-tight mb-1">{{ photo.name }}</p>
                        <div class="photo-meta flex gap-3 text-[0.65rem] tracking-wider uppercase text-slate-400 font-medium">
                            <span>{{ photo.dateTaken ? (photo.dateTaken | date:'mediumDate') : 'Unknown date' }}</span>
                            @if (photo.format) {
                            <span>{{ photo.format.toUpperCase() }}</span>
                            }
                        </div>
                    </div>
                </div>
            </article>
            }
        </div>
        } @else {
        <p class="text-sm text-slate-400">No photos have been associated with this album yet.</p>
        }
    </section>
    } @else {
    <div class="flex flex-col items-center justify-center py-40 text-slate-500">
        <p>Album not found.</p>
        <a routerLink="/" class="text-indigo-400 font-bold mt-4">Return to albums</a>
    </div>
    }
</div>
